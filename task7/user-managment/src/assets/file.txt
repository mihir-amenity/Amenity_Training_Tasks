import React, { useState } from "react";
import Register from "./Register";

function App() {
  const [formData, setFormData] = useState({
    first_name: "Parth",
    last_name: "Vaghela",
    email: "parthvaghela27@gmail.com",
    address: "Shreenath Residency, Ahmedabad",
    password: "Parth@2025",
    confirm_password: "Parth@2025",
    phone_number: "+919876543210",
    pro

  });

  const [profilePic, setProfilePic] = useState(null);

  const handleFileChange = (e) => {
    setProfilePic(e.target.files[0]);
  };

  const handleSubmit = async () => {
    try {
      const data = new FormData();

      
      Object.keys(formData).forEach((key) => {
        data.append(key, formData[key]);
      });

      
      if (profilePic) {
        data.append("profile_picture", profilePic);
      }

      const response = await fetch(
        "https://shawanda-abiding-rayne.ngrok-free.dev/api/signup/",
        {
          method: "POST",
          headers: {
            "ngrok-skip-browser-warning": "true",
            
          },
          body: data,
        }
      );

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const result = await response.json();
      console.log("Signup successful:", result);
    } catch (error) {
      console.error("Signup error:", error);
      console.log("Error response:", error);
    }
  };

  return (
   <Register/>
  );
}

export default App;
